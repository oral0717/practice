	<script id="jquery_183" type="text/javascript" class="library" src="/js/sandbox/jquery/jquery-1.8.3.min.js"></script>

<!-- 这里添加一个属性data-elem值为：city,district,county,servicearea，就是把callback里的"_callback"去掉 -->
<div class="info" id="lhg">
	<ul data-bindajax="true" data-url="getajaxcounty" data-name="cname" data-callback="county_callback" data-elem="county" data-field="did" data-value="u_dname">
	</ul>
</div>

<script>
/*
代码没看清楚，那个标识的方法这里不适用。
*/
$(function() {
	$('[data-bindajax=true]').on('click', 'li', function() {
		
		var $this = $(this);
		var id = $this.data('id');
		var field = $this.parent().data('field');
		var name = $this.parent().data('name');
		var url = $this.parent().data('url');
		var elem = $this.parent().data("elem");
		
		$('#' + field).val($this.data('id'));

		if ($this.parent().data("value")) {
				$('#' + $this.parent().data('value')).val($this.data("value"))
		}
		
		
		$.post('/TianheWork/index.php/Areaoperating/' + url, {
				id: id
			},function (data) {//把函数内嵌进来了
				var html = "";
				for (var i = 0; i < data.length; i++) {
					var dataid = data[i][field];
					var dataname = data[i][name];
					html = html + '<li data-id="' + dataid + '" data-value="' + dataname + '">' + dataname + '</li>';
				}
				
				$('#' + elem).find(".info ul").eq(0).html(html);
			}
		}));
		
		
})
</script>